<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org"
	  xmlns="http://www.w3.org/1999/html" xmlns:form="http://www.w3.org/1999/html">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

		<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans|Oxygen" rel="stylesheet">
	    <link rel="stylesheet" type="text/css" th:href="@{css/Search.css}">
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	    <script th:src="@{script/Search.js}" type="text/javascript"></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-7446451293480885",
                enable_page_level_ads: true
            });
		</script>
        <script type='text/javascript'>
            $(document).ready(function() {
                $('img#closed').click(function(){
                    $('#btm_banner').hide(90);
                });
            });
        </script>
		<style type='text/css'>
			div#btm_banner {
				bottom: 0;
				position: fixed;
				width: 50%;
				opacity: 0.9;
				left: 25%;
			}
			div#btm_banner img{
				border:0;
				cursor:pointer;
			}
		</style>

		<style>
	 		.fa {
				padding-top:10px;
			    padding-right: 10px;
			    padding-left:10px;
			    padding-bottom:10px;
			    font-size: 20px;
			    width: 40px;
			    text-align: center;
			    text-decoration: none;
			    margin: 5px 2px;
			    border-radius: 50%;
			}
			.fa:hover {
			    opacity: 0.7;
				color:white;
			}
			.fa-facebook {
			  background: #3B5998;
			  color: white;
			}
			.fa-twitter {
			  background: #55ACEE;
			  color: white;
			}
			.fa-google {
			  background: #dd4b39;
			  color: white;
			}
			.fa-instagram {
			  background: #125688;
			  color: white;
			}
			body{
			font-family: 'Oxygen', sans-serif;
			}
			.card {
			    transition: 0.3s;  
			    border-radius: 5px;
				background-color:white;
				<!--border:1px solid #F0EDED;-->
				border:1px solid ;
			}
			* Tooltip container */
			.tooltip {
			    position: relative;
			    display: inline-block;
			    border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
			}
			/* Tooltip text */
			.tooltip .tooltiptext {
			    visibility: hidden;
			    width: 120px;
			    background-color: black;
			    color: #fff;
			    text-align: center;
			    padding: 5px 0;
			    border-radius: 6px;
			    /* Position the tooltip text - see examples below! */
			    position: absolute;
			    z-index: 1;
			}
			/* Show the tooltip text when you mouse over the tooltip container */
			.tooltip:hover .tooltiptext {
			    visibility: visible;
			}
			img {
			    border-radius: 5px 5px 0 0;
			}
			.container {
			    padding: 2px 16px;
			}
			
			.active{
	background-color:white;
	color:#AE1616;
}
		</style>
		
	</head>
	
	<body>
<!--Advertisement-->
	<div style='height: 0px;'></div>
	<div align='center' id='btm_banner' style='height: 150px; z-index: 9999;'>
		<div style='text-align: center; width: 983px'>
			<img id='closed' src='http://3.bp.blogspot.com/-FJbBxXlFzSM/UChDqaGbcMI/AAAAAAAACPA/Lc4uhFU639c
/s320/exit.png'/></div>
		<div style='clear: both;'></div>
		<p>
		<p><center>
		<!-- ADVERTISING CODE -->


		<iframe src="//cdn.bannersnack.com/banners/b132cgv45/embed/index.html?userId=38477934&t=1543553569" width="728" height="90" scrolling="no" frameborder="0" allowtransparency="true" allow="autoplay" allowfullscreen="true"></iframe>
		<!-- ADVERTISING CODE -->
	</center></p>
		</p>
	</div>
<!--Advertisement-->

<div class="container-fluid" style="background-color:;color:#AE1616;padding:10px;border-bottom:1px solid lightgrey;">
<div class="row">
    <div class="col-sm-2"><a href="/" style="text-decoration: none"><h4 style="color:#AE0D0D;background-color:white;text-align:center">HoosierEvents</h4></a></div>
<div class="col-sm-1"></div>
<div class="col-sm-5"></div>
<div class="col-sm-1"><button id="myBtn" style="display:none;" onclick="Search()"></button></div>
    <div class="col-sm-1">
        <button class="btn-default xyz" id="profilebutton" onclick="navigateToProfile()" style="color:#AE0D0D;background-color:green;border:0px; display: none;  background: url(/images/profile_img.jpg)"><h5>Profile</h5></button>
    </div>
<div class="col-sm-1">
    <form action="/login">
    <button class="btn-default xyz" id="loginbutt" style="color:#AE0D0D;background-color:white;border:0px;display: none;"><h5>Login</h5></button>
    </form>
	</div>

	<div class="col-sm-1">
    <form action="/logout">
        <button class="btn-default xyz" id="logoutbutt"  style="color:#AE0D0D;background-color:white;border:0px; display: none"><h5>Logout</h5></button>
    </form>
  
</div>
</div>
</div><br>
<div class="container-fluid">
<div class="row">
<div class="col-sm-2"></div>
<div class="col-sm-8" style="background-color:;height:650px;overflow-y:scroll;">
<div class="row">
<div class="col-sm-10"><input type="text" class="form-control" id="searchbartextbox"></div>
<!--<div class="col-sm-4">
  <div class="dropdown">
    <button class="btn btn-block dropdown-toggle" style="width:80%;color:white;" type="button" id="searchbardropdown" data-toggle="dropdown"><h5>Search</h5></button>
    <ul class="dropdown-menu">
      <li><a href="#" onClick="DisplayEventsfromCategory()">Categories</a></li>
      <li><a href="#" onClick="DisplayEventsbyLocation()">Location</a></li>
    </ul>
  </div>
</div>-->
</div><br>
<div class="row" id="searchoptions">
<div class="col-sm-3">Search By:</div>
<div class="col-sm-2"><button class="btn-block ss" onclick="DisplayEvent()"> Name</button></div>
<div class="col-sm-2"><button class="btn-block ss" onclick="DisplayEventsfromCategory()">Category</button></div>
<div class="col-sm-2"><button class="btn-block ss" onclick="DisplayEventsbyLocation()">Location</button></div>
</div>
<br><br>
<div class="row">
	<div class="col-sm-12" id="result_data">
	
	</div>
</div>

</div>
<div class="col-sm-2"></div>
</div>
</div>
 		
 		<!-- Carousel with search bar -->
 		<!--<div class="container">
				
				<div id="searchbar" class="input-group">
					<div id="searchbarcol" class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
					  <input id="searchbartextbox" type="text" class="form-control" aria-label="Text input with dropdown button">
					</div>
				  <div class="input-group-append">
				    <button id="searchbardropdown" class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Search</button>
				    <div class="dropdown-menu">
				      <a class="dropdown-item" onClick="DisplayEventsfromCategory()">Categories</a>
				      <a class="dropdown-item" onClick="DisplayCategories()">List of Categories</a>
				      <a class="dropdown-item" onClick="DisplayEventsbyLocation()">Location</a>
				      <a class="dropdown-item" onClick="DisplayEvent()">By Event</a>
				      <div role="separator" class="dropdown-divider"></div>
				      <button class="dropdown-item" onClick="DisplayAllEvents()">HoosierEvents</button>
				    </div>
				  	</div>
				  
				</div>
 		</div>-->
 		
 		<div class="container-fluid" style="border-top:1px solid lightgrey;text-align:center;top:20%;height:auto;position:relative;background-color: !important;color:">
			<br><div class="row" style="background-color:;">
			<div class="col-sm-6 links" style="color:#AE0D0D;"><div class="row"  style="font-family: 'Oxygen', sans-serif;
		background-color:"><div class="col-sm-12"><h4>About HoosierEvents</h4></div></div>
				
					<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
			color:#3C48AE">Sitemap</a></h5></div></div>
					<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
			color:#3C48AE">About us</a></h5></div></div>
					<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
			color:#3C48AE">FAQs</a></h5></div></div>
					<br>
				</div>
				
				<div class="col-sm-6"><div class="row"  style="background-color:"><div class="col-sm-12" style="font-family: 'Oxygen', sans-serif;
			text-align:center"><h4 style="color:#AE0D0D;">Connect with Us</h4></div></div>
					<div class="row">
					<div class="col-sm-4"></div>
					<div class="col-sm-1" style="padding-right:25px;" ><a href="https://www.facebook.com/HoosierEvents" class="fa fa-facebook"></a></div>
						<div class="col-sm-1" style="padding-right:25px;"><a href="https://twitter.com/hoosierevents" class="fa fa-twitter"></a></div>
						<div class="col-sm-1" style="padding-right:25px;" ><a href="#" class="fa fa-google"></a></div>
						<div class="col-sm-1" style="padding-right:25px;" ><a href="https://www.instagram.com/eventshoosier/" class="fa fa-instagram"></a></div>
						<div class="col-sm-4"></div>
					</div>
				</div>
			</div>
		</div>
 		
	<script>
	var header = document.getElementById("searchoptions");
var btns = header.getElementsByClassName("btn");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function() {
    var current = document.getElementsByClassName("active");
    if (current.length > 0) { 
      current[0].className = current[0].className.replace(" active", "");
    }
    this.className += " active";
  });
}
	
	function sendevent()
{
	window.location.href = "eventpage?id="+this.id;
}
	
        function GET() {
            var data = [];
            for(x = 0; x < arguments.length; ++x)
                data.push(location.href.match(new RegExp("(/\?id=)([^\&]*)"))[2]);
            return data;
        }

         $(document).ready(function(){
			if((GET("id")[0])!=="") {
                document.getElementById('searchbartextbox').value = (GET("id")[0]);
                var input_text = GET("id")[0];
                console.log(input_text);
                $.ajax({
         			type:'POST',
         			dataType:'text',
         			data: {search_text: input_text},
         			url:"/checkifCategory",
         			  success: function(data) {
         					console.log('success',data);
         					var id = parseInt(data);
         					console.log(id);
         					/* document.getElementById("result_data").innerHTML=data; */
         					if(id > 0){
         						$.ajax({
         	             			type:'POST',
         	             			dataType:'JSON',
         	             			data: {id: id},
         	             			url:"/getEventsbyCategory",
         	             			  success: function(data) {
         	             					console.log('success',data);
         	             					document.getElementById("result_data").innerHTML="";
         	             					var i;
											for (i=0;i<data.length;i++)
											{			
												var x=document.createElement("div");
												x.className="col-sm-6 abc";
												x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";
												x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
												x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
												x.id=data[i].id;
																				x.addEventListener("click",sendevent);

												document.getElementById("result_data").appendChild(x);
											}
         	             			   },
         	             			   error:function(exception){alert('Exception:'+exception);}})
         					}
         					else{
         						$.ajax({
         	             			type:'POST',
         	             			dataType:'JSON',
         	             			data: {search_text: input_text},
         	             			url:"/getEventsforFirstSearch",
         	             			  success: function(data) {
         	             					console.log('success',data);
         	             					document.getElementById("result_data").innerHTML="";
         	             					var i;
											for (i=0;i<data.length;i++)
											{			
												var x=document.createElement("div");
												x.className="col-sm-6 abc";
												x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";
												x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
												x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
												x.id=data[i].id;
																				x.addEventListener("click",sendevent);

												document.getElementById("result_data").appendChild(x);
											}

         	             			   },
         	             			   error:function(exception){alert('Exception:'+exception);}})
         					}
         			   },
         			   error:function(exception){alert('Exception:'+exception);}})
			}
                else{
                	$.ajax({
             			type:'POST',
             			dataType:'JSON',
             			url:"/getAllEvents",
             			  success: function(data) {
             					console.log('success',data);
             					document.getElementById("result_data").innerHTML="";
	             					var i;
									for (i=0;i<data.length;i++)
									{			
										var x=document.createElement("div");
										x.className="col-sm-6 abc";
										x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";
										x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
										x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
										x.id=data[i].id;
																		x.addEventListener("click",sendevent);

										document.getElementById("result_data").appendChild(x);
									}
             			   },
             			   error:function(exception){alert('Exception:'+exception);}})
                }
			})

	</script>
	</body>
 	<script>
 	function DisplayAllEvents(){
 		console.log("Hello");
 		$.ajax({
 			type:'POST',
 			dataType:'JSON',
 			url:"/getAllEvents",
 			  success: function(data) {
 					console.log('success',data);
 					document.getElementById("result_data").innerHTML="";
  					var i;
					for (i=0;i<data.length;i++)
					{			
						var x=document.createElement("div");
						x.className="col-sm-6 abc";
						x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";
						x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
						x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
						x.id=data[i].id;
														x.addEventListener("click",sendevent);

						document.getElementById("result_data").appendChild(x);
					}

 			   },
 			   error:function(exception){alert('Exception:'+exception);}})
 	}
 	
	function DisplayEventsfromCategory(){
		var category_id = document.getElementById("searchbartextbox").value;
		console.log(category_id);
		$.ajax({
			type:'POST',
			dataType:'JSON',
			data: {id:category_id},
			url:"/getEventsbyCategory",
			success: function(data) {
				console.log('success',data);
				
				document.getElementById("result_data").innerHTML="";
				var i;
				/* alert(data.length); */
				/* alert(data[0].eventTitle); */
				for (i=0;i<data.length;i++)
				{
							
				var x=document.createElement("div");
				x.className="col-sm-6 abc";
			//	x.style="border:1px solid lightgrey;width:60%;left:20%;min-width:300px;min-height:auto;max-height:auto !important;position:relative;";
				x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";

				//x.innerHTML="<div class='container'><div class='row'><div class='col-sm-6'><p>"+element.eventTitle+"</p><p>"+element.location+"</p></div><div class='col-sm-6'><img src='/getImage?img="+element.id+".jpg' style='width:100%;min-height:155px;max-height:250px;'></div></div></div>>";
				x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
				x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
				//x.id=element.id;

				x.id=data[i].id;
												x.addEventListener("click",sendevent);

				//alert(x.id);
			//	document.getElementById(x.id).onclick="sendevent()";
				//x.addEventListener("click",sendevent);

				//i=i+1;
										//		x.innerHTML="<p>"+element.eventTitle+"</p>";

				//x.addEventListener("click",sendevent);

				//temp="displayrow"+1;
				document.getElementById("result_data").appendChild(x);
							
							
								//document.getElementById("result_data").innerHTML+=data[i].eventTitle;

				}
				
				
				
				
				//document.getElementById("result_data").innerHTML=data[0].eventTitle;
			   },
		   error:function(exception){alert('Exception:'+exception);}})
	}
	
	function DisplayEventsbyLocation(){
		var location_name = document.getElementById("searchbartextbox").value;
		console.log(location_name);
		$.ajax({
			type:'POST',
			dataType:'JSON',
			data: {location:location_name},
			url:"/getEventsbyLocation",
			success: function(data) {
				console.log('success',data);
				console.log("${m.event}");
				var i;
				//alert(data.length);
				//alert(data[0].eventTitle);
				for (i=0;i<data.length;i++)
				{
							
				var x=document.createElement("div");
				x.className="col-sm-6 abc";
			//	x.style="border:1px solid lightgrey;width:60%;left:20%;min-width:300px;min-height:auto;max-height:auto !important;position:relative;";
				x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";

				//x.innerHTML="<div class='container'><div class='row'><div class='col-sm-6'><p>"+element.eventTitle+"</p><p>"+element.location+"</p></div><div class='col-sm-6'><img src='/getImage?img="+element.id+".jpg' style='width:100%;min-height:155px;max-height:250px;'></div></div></div>>";
				x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
				x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
				//x.id=element.id;

				x.id=data[i].id;
												x.addEventListener("click",sendevent);

				//alert(x.id);
			//	document.getElementById(x.id).onclick="sendevent()";
				//x.addEventListener("click",sendevent);

				//i=i+1;
										//		x.innerHTML="<p>"+element.eventTitle+"</p>";

				//x.addEventListener("click",sendevent);

				//temp="displayrow"+1;
				document.getElementById("result_data").appendChild(x);
							
							
								//document.getElementById("result_data").innerHTML+=data[i].eventTitle;

				}
			   },
		   error:function(exception){alert('Exception:'+exception);}})
	}
	
	function DisplayEvent(){
		var event_name = document.getElementById("searchbartextbox").value;
		console.log(event_name);
		$.ajax({
			type:'POST',
			dataType:'JSON',
			data: {event:event_name},
			url:"/getEventbyName",
			success: function(data) {
				document.getElementById("result_data").innerHTML="";
				console.log('success',data);
				
											/* alert('success by name'); */
		
				var i;
				/* alert(data.length); */
				//alert(data[0].eventTitle);
				for (i=0;i<data.length;i++)
				{
				var x=document.createElement("div");
				x.className="col-sm-6 abc";
			//	x.style="border:1px solid lightgrey;width:60%;left:20%;min-width:300px;min-height:auto;max-height:auto !important;position:relative;";
				x.style="padding:15px;border-radius:4px;min-height:auto;min-width:200px;max-width:500;max-height:auto;font-family: 'Open Sans', sans-serif;";

				//x.innerHTML="<div class='container'><div class='row'><div class='col-sm-6'><p>"+element.eventTitle+"</p><p>"+element.location+"</p></div><div class='col-sm-6'><img src='/getImage?img="+element.id+".jpg' style='width:100%;min-height:155px;max-height:250px;'></div></div></div>>";
				x.innerHTML="<img src='/getImage?img="+data[i].id+".jpg' style='width:100%;height:auto;'>";
				x.innerHTML+="<div class='container'><div class='row'><div class='col-sm-12'>"+data[i].eventTitle+"</div></div><div class='row'><div class='col-sm-12' style='color:green;'>"+data[i].location+"</div></div></div>";
				//x.id=element.id;

				x.id=data[i].id;
												x.addEventListener("click",sendevent);

				//alert(x.id);
			//	document.getElementById(x.id).onclick="sendevent()";
				//x.addEventListener("click",sendevent);

				//i=i+1;
										//		x.innerHTML="<p>"+element.eventTitle+"</p>";

				//x.addEventListener("click",sendevent);

				//temp="displayrow"+1;
				document.getElementById("result_data").appendChild(x);
							
							
								//document.getElementById("result_data").innerHTML+=data[i].eventTitle;

				}
				
				
				//document.getElementById("event_title").innerHTML=data.eventTitle;
			   },
		   error:function(exception){alert('Exception:'+exception);}})
	}
	
	function DisplayCategories(){
		$.ajax({
			type:'POST',
			dataType:'JSON',
			url:"/getCategories",
			success: function(data) {
				console.log('success',data);
				document.getElementById("event_title").innerHTML=data;
			   },
		   error:function(exception){alert('Exception:'+exception);}})
	}
	</script>
	<script>

        $(document).ready(function () {
            $.ajax({
                    type: "GET",
                    url: '/getauth',
                    success: function (data) {
                        console.log(data);
                        if(data==="anonymousUser"){
                            document.getElementById('logoutbutt').style.display="none";
                            document.getElementById('loginbutt').style.display="block";
                            document.getElementById('profilebutton').style.display="none";


                        }
                        else{

                            document.getElementById("loginbutt").style.display="none";
                            document.getElementById("logoutbutt").style.display="block";

                            document.getElementById('profilebutton').style.display="block";


                        }


                    },
                    error: function (e) {
                        console.log(e);
                    }

                }
            )
        })

	</script>
</html>