<html xmlns:th="http://www.springframework.org/schema/data/jaxb">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <title>Hoosier Events</title>


<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Oxygen" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/signup.css}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

    <style>
		 .fa {
padding-top:10px;
  padding-right: 10px;
  padding-left:10px;
  padding-bottom:10px;
  font-size: 20px;
  width: 40px;
  text-align: center;
  text-decoration: none;
  margin: 5px 2px;
  border-radius: 50%;
}

.fa:hover {
    opacity: 0.7;
	color:white;
}

.fa-facebook {
  background: #3B5998;
  color: white;
}

.fa-twitter {
  background: #55ACEE;
  color: white;
}

.fa-google {
  background: #dd4b39;
  color: white;
}


.fa-instagram {
  background: #125688;
  color: white;
}

body, html, .container-fluid {
     font-family: 'Oxygen', sans-serif;

	width: 100%;
}

        body{
            background-color:#F0EDED;
        }
        label{
            color:navy;
        }


        #loading {


            position:fixed;
            top:50%;
            right:50%;
            width:auto;
            height: auto;
            background-color: #666;

            background-repeat: no-repeat;
            background-position: center;
            z-index:10000000;
            opacity: 0.4;
            filter: alpha(opacity=40);
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
           height:auto;
		   width:auto;
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 40%;
			top:20%;
        }

        /* The Close Button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
<!--<nav class="navbar navbar-inverse" style="background-color:#AE1616;width:100%" >
    <div class="container-fluid" style="text-align:left">
        <div class="navbar-header">
            <a class="navbar-brand" href="homePage.html" id="abc">HoosierEvents</a>
        </div>
        <ul class="nav navbar-nav">
            <li id="homepage"><a href="homePage.html" class="top-nav-links" style="color:white;">Home</a></li>
        </ul>
        <ul class="nav navbar-nav" id="explore">
          <li><a class="top-nav-links" href="search_events.html" style="color:white;">Explore Events</a></li>
        </ul>

           <form class="navbar-form navbar-left" action="">
              <div class="form-group">
                <input type="text" class="form-control" style="text-align:center;" placeholder="search for events!">
              </div>
              <button type="submit" class="btn btn-default" style="height:4.5% !important;width:15%!important;position:relative"><span class="glyphicon glyphicon-search"></span></button>
            </form> 
        <ul class="nav navbar-nav navbar-right">
            <li><a href="loginpage.html" style="">Sign In</a></li>
        </ul>

    </div>
</nav>-->
<!--<img id="loading" src="http://loadinggif.com/images/image-selection/3.gif" style="display:none">-->
<img id="loading" src="https://cdn.dribbble.com/users/107759/screenshots/2436386/copper-loader.gif" style="display:none">

<!--modal-->
<div id="myModal" class="modal container" style="font-family: 'Open Sans', sans-serif;
">

    <!-- Modal content -->
    <div class="modal-content" onload="redirectlogin()" >
        <span class="close" onclick="closemodal();">&times;</span>
        <div class="row">
            <div style="color:green; display: block;"><h3>User is signed up. <a href ="/login">Proceed to login</a></h3></div>
        </div>

    </div>

</div>


<!--modal-->
<div class="container-fluid" style="background-color:white;color:#AE1616;padding:10px;border-bottom:1px solid lightgrey;">
<div class="row">
    <div class="col-sm-2"><a href="/" style="text-decoration: none"><image src='/images/newlogo.png' style="width: 150px;height: 50px;" /> </a></div>

    <!--<div class="col-sm-2"><a href="/" style="text-decoration: none"><h4 style="color:#AE0D0D;background-color:white;text-align:center">HoosierEvents</h4></a></div>-->
<div class="col-sm-1"></div>
<div class="col-sm-6"></div>
<div class="col-sm-1"></div>
	<div class="col-sm-1">
		<form action="/login">
			<button class="btn-default xyz" id="loginbutt" style="color:#AE0D0D;background-color:white;border:0px;"><h5>Login</h5></button>
		</form>
	

	</div>


	</div>

   
	
</div>

<div class="container" style="top:5%;border:0.5px solid #F0EDED;border-radius:4px;position:relative;background-color:white">
    <div class="row">
        <div class="col-sm-12"><h3>Sign Up with Hoosier Events!</h3></div>
    </div>	<br />
    <div class="form-bottom">
        <!--/*@thymesVar id="RegForm" type="com.login.ldap.springboot.controller.RegForm"*/-->

            <div class="form-group">
                <label class="" for="form-first-name">Name<span style="color:red">*</span></label>
                <input  type="text" name="name"  placeholder="Name..." class="form-first-name form-control" id="form-first-name" required="required" />
                <div id="empty_name" style="color:red;display:none;"><h6>Please enter your name.</h6></div>
            </div>
            <div class="form-group">
                <label class="" for="form-password">Password<span style="color:red">*</span></label>
                <input  type="password"   name="password_sign" placeholder="Password..." class="form-last-name form-control" required="required" id="form-password" />
                <div id="empty_password" style="color:red;display:none;"><h6>Please enter a password.</h6></div>
            </div>
            <div class="form-group">
                <label class="" for="form-email">Email<span style="color:red">*</span></label>
                <input  type="email"  name="email_sign" placeholder="Email..." class="form-email form-control" required="required" id="form-email" />
                <div id="valid_email" style="color:red;display:none;"><h6>Please enter your email ID</h6></div>
                <div id="email_exists" style="color:red;display:none;"><h6>Email ID already taken</h6></div>
                <div id="invalid_email" style="color:red;display:none;"><h6>Email ID is Invalid</h6></div>
            </div>

            <div class="form-group">
                <label class="" for="form-phone">Phone<span style="color:red">*</span></label>
                <input  type="text"  name="phone" placeholder="Phone Number..." class="form-phone form-control" required="required"  id="form-phone" />
                <div id="valid_phone" style="color:red;display:none;"><h6>Please enter a valid phone number</h6></div>
            </div>

            <div class="form-group">
                <label class="">Organizer or User<span style="color:red">*</span></label>
                <input type="radio" name="userorg" id="user" value="user" checked="checked">User </input>
                <input type="radio" name="userorg" value="organizer" id="organizer">Organizer</input>
                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>

            </div>
            <div class="row">
                <div class="col-sm-12"><h6><span style="color:red">*</span>Fields are mandatory</h6></div></div>
            <div class="form-actions" >

                <button class="btn" type="submit" id="submit_button" onclick="sign_up()" >Sign me up!</button>
                <div id="success" style="color:green;display:none;"><h3>User is signed up. <a href ="/login">Proceed to login</a></h3></div>
            </div>


    </div>
</div>

<div class="container-fluid fancy" style="border-top:1px solid lightgrey;text-align:center;top:20%;height:auto;position:relative;background-color:white !important;color:">
<br><div class="row" style="background-color:;">
	<!--<div class="col-sm-4">
	<div class="row" style="background-color:lightgrey"><div class="col-sm-12"><h4 style="color:#AE0D0D">Hoosier Events</h4></div></div>
		<div class="row" style="text-align:center;"><div class="col-sm-12">Connect with other enthusiasts and do what you enjoy. Signup to explore and host events!</div></div>
	<br>
	</div>-->
	<div class="col-sm-6 links" style="color:#AE0D0D;"><div class="row"  style="font-family: 'Oxygen', sans-serif;
background-color:"><div class="col-sm-12"><h4>About HoosierEvents</h4></div></div>
		
		<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
color:#3C48AE">Sitemap</a></h5></div></div>
		<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
color:#3C48AE">About us</a></h5></div></div>
		<div class="row"><div class="col-sm-12"><h5><a href="" style="font-family: 'Open Sans', sans-serif;
color:#3C48AE">FAQs</a></h5></div></div>
		<br>
	</div>
	
	<div class="col-sm-6"><div class="row"  style="background-color:"><div class="col-sm-12" style="font-family: 'Oxygen', sans-serif;
text-align:center"><h4 style="color:#AE0D0D;">Connect with Us</h4></div></div>
				           <!--  <i class="fa fa-home mr-3"></i>&nbsp Bloomington, IN 47408, US
							<br>
				            <i class="fa fa-envelope mr-3"></i>&nbsp info@example.com
							<br>
							<i class="fa fa-phone mr-3"></i>&nbsp + 01 234 567 88 -->

		<div class="row">
		<div class="col-sm-4"></div>

		<div class="col-sm-1" style="padding-right:25px;" ><a href="https://www.facebook.com/HoosierEvents" class="fa fa-facebook"></a></div>
<div class="col-sm-1" style="padding-right:25px;"><a href="https://twitter.com/hoosierevents" class="fa fa-twitter"></a></div>
<div class="col-sm-1" style="padding-right:25px;" ><a href="#" class="fa fa-google"></a></div>
<div class="col-sm-1" style="padding-right:25px;" ><a href="https://www.instagram.com/eventshoosier/" class="fa fa-instagram"></a></div>
<div class="col-sm-4"></div>
		</div>
	</div>
</div>
</div>

<script>
function redirectlogin()
{
	var delayInMilliseconds = 1500; //1 second

setTimeout(function() {
    location.replace("/login");
}, delayInMilliseconds);
}
function closemodal()
{
document.getElementById("myModal").style.display="none";
}

    function validateEmail(email) {
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }

    function sign_up(){
        document.getElementById("empty_name").style.display="none";
        document.getElementById("empty_password").style.display="none";
        document.getElementById("valid_email").style.display="none";
        document.getElementById("email_exists").style.display="none";
        document.getElementById("valid_phone").style.display="none";
        document.getElementById("success").style.display="none";
        document.getElementById("invalid_email").style.display="none";

        debugger;
        var flag=0;
        var email=0;

        if(document.getElementById("form-first-name").value === "")
        {
            debugger;
            document.getElementById("empty_name").style.display="block";
            flag=1;
        }
        if(document.getElementById("form-password").value === "")
        {
            document.getElementById("empty_password").style.display="block";
            flag=1;
        }

        if(document.getElementById("form-email").value === "")
        {
            document.getElementById("valid_email").style.display="block";
            flag=1;
            email=1;
        }
        if(!validateEmail(document.getElementById("form-email").value)){
            debugger;
            document.getElementById("invalid_email").style.display="block";
            flag=1;
            email=1;
        }

        if(email===0) {
            debugger;
            $.ajax({
                type: "GET",
                url: "/checkifexists",
                data: {'email': document.getElementById("form-email").value},
                success: function (data) {

                    if (data === "found") {
                        debugger;
                        flag = 1;
                        document.getElementById("email_exists").style.display = "block";

                    }
                }


            })
        }


        if(document.getElementById("form-phone").value === "")
        {
            document.getElementById("valid_phone").style.display="block";
            flag=1;
        }

        if(document.getElementById("form-phone").value !== "")
        {
            if(isNaN(document.getElementById("form-phone").value))
            {
                flag=1;
                document.getElementById("valid_phone").style.display="block";
            }

        }


        if(flag===0)
        {
            debugger;
            var typeofuser;
            if (document.getElementById('user').checked){
                typeofuser=document.getElementById('user').value;
            }
            if(document.getElementById('organizer').checked)
            {
                typeofuser=document.getElementById('organizer').value;
            }
            debugger;
            document.getElementById("loading").style.display="block";
            $.ajax({
                type: "GET",
                url: "/signup/me",
                data: {'name': document.getElementById("form-first-name").value, 'password' : document.getElementById("form-password").value, 'phone' : document.getElementById("form-phone").value,'email':  document.getElementById("form-email").value ,'type_user' : typeofuser },
                success: function (data) {
                    debugger;
                    if(data ==="Success"){
                        debugger;
                        document.getElementById("loading").style.display="none";
                        document.getElementById("myModal").style.display="block";
                        // document.getElementById("success").style.display="block";

                    }

                },
                error: function(e){
                    debugger;
                    console.log(e);
                }




                }

            )


        }


    }
</script>

<script>
    // var modal = document.getElementById('myModal');
    //
    // // Get the button that opens the modal
    // var btn = document.getElementById("reportthisevent");
    //
    // var span = document.getElementsByClassName("close")[0];
    //
    // // When the user clicks the button, open the modal
    // btn.onclick = function() {
    //     modal.style.display = "block";
    //     document.getElementById("reset_email").value="";
    // }


    span.onclick = function() {
        modal.style.display = "none";
        pass_div.style.display="none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
            pass_div.style.display="none";
        }
    }
</script>


</body>
</html>