<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org"
	  xmlns="http://www.w3.org/1999/html" xmlns:form="http://www.w3.org/1999/html">
<head>
  <title>HoosierEvents</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{css/bootstrap.min.css}">

<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen" rel="stylesheet">
  <script src="script/eventpage.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" th:href="@{css/eventpage.css}">
  <link rel="stylesheet" th:href="@{css/chatWindow.css}">
  <link rel="stylesheet" th:href="@{css/chat.css}">
  	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	    <link rel="stylesheet" type="text/css" th:href="@{css/HomePageStyle.css}">

  <style>
  #registerbutt .tooltiptext {
    visibility: hidden;
    width: 150px;
    background-color: white;
    color: grey;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;

    /* Position the tooltip */
    position: absolute;
    z-index: 1;
}
#registerbutt[disabled]:hover .tooltiptext {
    visibility: visible;
}

  body, html, .container-fluid {
     font-family: 'Oxygen', sans-serif;

	 width:100%
}
#registerbutt:disabled{
background-color:#dddddd !important;
}
</style>
</head>
<body>
<!-- NAVIGATION BAR -->
	
<div class="container-fluid" style="background-color:;color:#AE1616;padding:10px;border-bottom:1px solid lightgrey;">
<div class="row">
<div class="col-sm-2"><h4 style="color:#AE0D0D;background-color:white;text-align:center">HoosierEvents</h4></div>
<div class="col-sm-1"><button class="btn-default xyz" style="color:#AE0D0D;background-color:white;border:0px;"><h5>Explore</h5></button></div>
<div class="col-sm-5"><input type="text" class="form-control" id="myInput" placeholder="Search"></div>
<div class="col-sm-3"><button id="myBtn" style="display:none;" onclick="javascript:alert('Hello World!')"></button></div>
<div class="col-sm-1">
    <form action="/login">
        <button class="btn-default xyz" id="loginbutt" style="color:#AE0D0D;background-color:white;border:0px;display: none"><h5>Login</h5></button>
    </form>
    <form action="/logout">
        <button class="btn-default xyz" id="logoutbutt"  style="color:#AE0D0D;background-color:white;border:0px; display: none"><h5>Logout</h5></button>
    </form>
</div>
</div>
</div>


<div class="container-fluid" style="background-color:lightgrey;">	
<div class="container" style="width:90%;top:10%;position:relative;background-color:;-bottom:0.5px groove #F4EFFE">
<div class="row">
	<!-- IMAGE DIV -->
	<div class="col-sm-8">
		<div class="row">
		<img src="" id="eventimg" class="" style="width:100%;height:auto;">
		</div>
	</div>
<br>
	<!-- event details div -->
	<div class="col-sm-4" >
		<div class="headers">
		<div class="row" ><h2 id="event_title"></h2></div>
		<div class="row" ><h5 id="event_date"></h5></div>
		<div class="row" ><h5 id="event_location" style="color:green"></h5></div>
		<div class="row" style="color:#726868"><h5>10am-3pm</h5></div>
		<div class="row" style="color:#3C6198"><h5>TICKETS:Available</h5></div>
		<br><br><br>
		</div>
		<div class="row" style="bottom:10%;position:relative"><div class="col-sm-12"><button id="registerbutt" disabled class="btn-block register_button" onClick="NewPage()"><h5>REGISTER<h5><span class="tooltiptext" ><h6>Login to Register.</h6></span></button>	
</div></div>
	</div>

</div>	
</div>
</div>
<br><br><br>

<!-- DESCRIPTION AND DETAILS DIV -->
<div class="container" style="top:20%;width:90%;position:relative">
<div class="row">
	<div class="col-sm-8">
      
		<div class="row" style="width:90%;border-bottom:0.5px solid lightgrey">
			<div class="page-header"><h3>Description</h3></div>
		 </div>
		<div class="row" style="width:90%;">
			<div><p id="event_description"> </p></div>
		</div>
    </div>
		<br><br><br>
	
<div class="col-sm-4" style="">  
    
		<!--<div class="row" >
			<div class="col-sm-12"><iframe id="myIframe" style="border:1px solid lightgrey;width:100%;position:relative;left:0%;"></iframe></div>
		</div>-->
		
		<br>
		<div class="row page-header" style="text-align:center;">
			<div class="col-sm-12"><h5>Contact Info:</h5></div>
		</div>
		<div class="row" style="text-align:center;">
			<div class="col-sm-12"><h6 id="created_by"></h6></div>
		</div>
		
		<div class="row" style="text-align:center;">
			<div class="col-sm-12"><h6 id="user_email"></h6></div>
		</div>
		<div class="row" style="text-align:center;">
	
			<div class="col-sm-12"><h6 id="user_contact"></h6></div>
		</div><br>
					<div class="row">
					<div class="col-sm-3"></div>
					<div class="col-sm-6" style="text-align:center">
					<button id="chatButton" class="btn-block chat-button">Chat </button></div>
										<div class="col-sm-3"></div>
					</div>

		<br>
		 <div class="row">
    <div class="col-sm-12">
    <a class="twitter-timeline" min-width:350px; data-height="350" href="https://twitter.com/BillGates?ref_src=twsrc%5Etfw">Twitter Handle</a> 
    </div>
    </div> 
	</div>
</div>
</div><br><br><br>
<div class="container" style="top:15%;width:90%;position:relative;">
<div class="row">
			<div class="col-sm-12"><iframe id="myIframe" src="./map" style="min-width:400px;min-height:300px;border:1px solid lightgrey;width:100%;position:relative;left:0%;"></iframe></div>
		</div>
<div class="row" style="text-align:center;">
<div class="col-sm-12" id="eventlocation"></div>
</div>		
</div>
<br><br><br><br><br>


 <div id="chat-page" class="hidden" style="min-width:350px;max-width:350px">
	<div class="chat-container">
		<div class="chat-header">
			<table><tr><td align="left" id="organiser_chatname"><h5>Help Desk</h5></td>
						<td align="right" style="padding-left:200px;"><button class="close">X</button></td></tr></table>
		</div>
		<div class="connecting">Connecting...</div>
		<ul id="messageArea">

		</ul>
		<form id="messageForm" name="messageForm">
			<div class="form-group">
				<div class="input-group clearfix">
					<input type="text" id="message" placeholder="Type a message..."
						autocomplete="off" class="form-control" />
					<button type="submit" class="primary" style="background-color:green;border:1px solid green;color:white;border-radius:2px;">Send</button>
				</div>
			</div>
		</form>
	</div>
</div>


<div class="container-fluid fancy" style="text-align:center;top:20%;height:auto;position:relative;background-color:lightgrey !important;color:">
<div class="row" style="background-color:;">
	<div class="col-sm-4">
	<div class="row"><div class="col-sm-12"><h4 style="color:#AE0D0D;">Hoosier Events</h4></div></div>
		<div class="row" style="text-align:center;"><div class="col-sm-12">Connect with other enthusiasts and do what you enjoy. Signup to explore and host events!</div></div>
	<br>
	</div>
	<div class="col-sm-4 links" style="color:#AE0D0D;"><div class="row"><div class="col-sm-12"><h4>Useful Links</h4></div></div>
		
		<div class="row"><div class="col-sm-12"><a href="" style="color:#48A2BD">Your Account</a></div></div>
		<div class="row"><div class="col-sm-12"><a href="" style="color:#48A2BD">About us</a></div></div>
		<div class="row"><div class="col-sm-12"><a href="" style="color:#48A2BD">Help</a></div></div>
		<br>
	</div>
	
	<div class="col-sm-4"><div class="row"><div class="col-sm-12"><h4 style="color:#AE0D0D;">Contact Us</h4></div></div>
				            <i class="fa fa-home mr-3"></i>&nbsp Bloomington, IN 47408, US
							<br>
				            <i class="fa fa-envelope mr-3"></i>&nbsp info@example.com
							<br>
							<i class="fa fa-phone mr-3"></i>&nbsp + 01 234 567 88


	</div>
</div>
</div>




<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script>
var loc="Bloomington";

/*passing parameter to iframe*/
/*document.getElementById('myIframe').src = "/map?seed=" + loc;*/

var event_id=document.URL.substr(document.URL.indexOf('=')+1);
$(document).ready(function(){
	$.ajax({
	type:'POST',
	dataType:'json',
	data: {id:event_id},
	url:"/getEvent",
	  success: function(data) {
			console.log('success',data);
			document.getElementById("eventimg").src='/getImage?img='+ data.id+'.jpg';
			document.getElementById("event_title").innerHTML=data.eventTitle;
			document.getElementById("event_date").innerHTML=data.startDate;
			document.getElementById("event_location").innerHTML=data.location;
			document.getElementById("event_description").innerHTML=data.description;
			document.getElementById("created_by").innerHTML=data.createdBy.name;
			document.getElementById('myIframe').src = "/map?seed=" + data.location;
			document.getElementById("eventlocation").innerHTML=data.location;
									document.getElementById("user_email").innerHTML=data.createdBy.email;
						document.getElementById("user_contact").innerHTML=data.createdBy.contact;
			
	   },
	   //error:function(exception){alert('Exeption:'+exception);}
	}); 
});	

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRL6D4jfWOtmDd3ge1pRtkEx6OtrqdU8c&callback=myMap"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="/script/chat.handler.js"></script>

<script>

    $(document).ready(function () {
        $.ajax({
                type: "GET",
                url: '/getuser',
                success: function (data) {
                    console.log(data);
                    if(data.user_type==='1' ){
                        document.getElementById('registerbutt').disabled=false;

                    }



                },
                error: function (e) {
                    console.log(e);
                }

            }
        )
    })

</script>

<script>

    $(document).ready(function () {
        $.ajax({
                type: "GET",
                url: '/getauth',
                success: function (data) {
                    console.log(data);
                    if(data==="anonymousUser"){
                        document.getElementById('logoutbutt').style.display="none";
                        document.getElementById('loginbutt').style.display="block";

                    }
                    else{
                        document.getElementById("loginbutt").style.display="none";
                        document.getElementById("logoutbutt").style.display="block";

                    }


                },
                error: function (e) {
                    console.log(e);
                }

            }
        )
    })

</script>

</body>
</html>
